var templateClima={wsIdentificador:"<put your openwheater lic here>",tbClima:null,linhasClima:[],linhasPrevisao:[],init:function(){templateClima.CarregarPrevisao(),google.charts.load("current",{packages:["line"]}),google.charts.setOnLoadCallback(templateClima.CarregarGrafico)},CarregarPrevisao:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(templateClima.CarregarPosicao):console.log("O seu navegador não suporta Geolocalização.")},CarregarPosicao:function(a){templateClima.CarregarTempo(a.coords.latitude,a.coords.longitude)},CarregarTempo:function(a,e){$.ajax({url:"https://api.openweathermap.org/data/2.5/forecast?lat="+a+"&lon="+e+"&appid="+templateClima.wsIdentificador+"&units=metric&lang=pt",type:"get",async:!1}).done(function(a){for(var e in a.list)templateClima.linhasPrevisao.push([moment(new Date(1e3*a.list[e].dt)).format("DD/MM HH")+"h",a.list[e].main.feels_like,a.list[e].main.temp,a.list[e].main.humidity,a.list[e].main.temp_min,a.list[e].main.temp_max,a.list[e].weather[0].description,a.list[e].weather[0].icon])}).fail(function(a,e,t){templateClima.linhasPrevisao=[]}),templateClima.CarregarTabela()},CarregarGrafico:function(){var a=new google.visualization.DataTable;for(var e in a.addColumn("string","Data"),a.addColumn("number","Temperatura"),a.addColumn("number","Sensação"),a.addColumn("number","Mínima"),a.addColumn("number","Máxima"),templateClima.linhasPrevisao)a.addRow([templateClima.linhasPrevisao[e][0],templateClima.linhasPrevisao[e][2],templateClima.linhasPrevisao[e][1],templateClima.linhasPrevisao[e][4],templateClima.linhasPrevisao[e][5]]);new google.charts.Line(document.getElementById("graficoClima")).draw(a,google.charts.Line.convertOptions({chart:{title:"Previsão do tempo",subtitle:"Próximos dias"},curveType:"function",height:500,series:{0:{axis:"Temperatura"}},axes:{x:{0:{side:"top"}},y:{Temperatura:{label:"Temperatura (Celsius)"}}}}))},CarregarTabela:function(){templateClima.tbClima=$("#tbClima").DataTable({data:templateClima.linhasPrevisao,columns:[{title:"Data"},{title:"Sensação"},{title:"Temperatura"},{title:"Umidade"},{title:"Mínima"},{title:"Máxima"},{title:"Tempo"}],dom:"Bfrtip",buttons:[],autoFill:!0,colReorder:!0,select:!0,keys:!0,dataSrc:"group",responsive:{breakpoints:[{name:"Data",width:120},{name:"Sensação",width:120},{name:"Temperatura",width:120},{name:"Umidade",width:120},{name:"Mínima",width:120},{name:"Máxima",width:120},{name:"Tempo",width:150}]},language:{processing:"Nenhum registro encontrado",search:"Pesquisar",lengthMenu:"_MENU_ resultados por página",info:"Mostrando de _START_ até _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 até 0 de 0 registros",infoFiltered:"(Filtrados de _MAX_ registros)",infoPostFix:"",loadingRecords:"Carregando...",zeroRecords:"Nenhum registro encontrado",emptyTable:"Nenhum registro encontrado",paginate:{first:"Primeiro",previous:"Anterior",next:"Próximo",last:"Último"},aria:{sortAscending:" Ordenar colunas de forma ascendente",sortDescending:"Ordenar colunas de forma descendente"},select:{rows:{_:"Você selecionou %d linhas",0:"Clique em uma linha para selecionar",1:"Apenas uma linha selecionada"}}}}),templateClima.tbClima.on("select",function(a,e,t,i){for(var l=0;l<i.length;l++)templateClima.linhasClima.push(templateClima.tbClima.rows(i[l]).data().toArray())}).on("deselect",function(a,e,t,i){for(var l=0;l<i.length;l++)templateClima.linhasClima.pop(templateClima.tbClima.rows(l).data().toArray())}),$("#selectAllClima").click(function(a){templateClima.tbClima.rows().deselect(),$(this).is(":checked")?templateClima.tbClima.rows().select():templateClima.tbClima.rows().deselect()})}};